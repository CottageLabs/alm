<%#
  # $HeadURL$
  # $Id$
  #
  # Copyright (c) 2009-2012 by Public Library of Science, a non-profit corporation
  # http://www.plos.org/
  #
  # Licensed under the Apache License, Version 2.0 (the "License");
  # you may not use this file except in compliance with the License.
  # You may obtain a copy of the License at
  #
  #     http://www.apache.org/licenses/LICENSE-2.0
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS,
  # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  # See the License for the specific language governing permissions and
  # limitations under the License.
-%>

<div class="content">
  <div class="page-header">
    <h1>Administration</h1>
  </div>

  <ul class="nav nav-tabs" id="admin-nav">
    <%= render :partial => 'admin/navigation' %> 
  </ul>
  
  <ul class="thumbnails">
    <li class="span4">
      <div class="thumbnail">
        <div class="caption">
          <h2>
            <i class="icon-file"></i> Articles
          </h2>
          <p><%= pluralize(@articles_count, 'article') %>, including <%= pluralize(@articles_recent_count, 'article') %> published in the last 30 days.</p>
        </div>
      </div>
    </li>
    <li class="span4">
      <div class="thumbnail">
        <div class="caption">
          <h2>
            <i class="icon-tags"></i> Sources 
            <% if @sources_disabled_count > 0 %>
              <span class="label label-warning pull-right">Problems</span>
            <% elsif @sources_inactive_count > 0 %>
              <span class="label label-info pull-right">Inactive Sources</span>
            <% else %>
              <span class="label label-success pull-right">No Problems</span>
            <% end %>
          </h2>
          <p><%= pluralize(@sources.count, 'source') %>, including <%= @sources_inactive_count %> inactive and <%= @sources_disabled_count %> disabled sources.</p>
        </div>
      </div>
    </li>
    <li class="span4">
      <div class="thumbnail">
        <div class="caption">
          <h2>
            <i class="icon-wrench"></i> Jobs
            <% if @delayed_jobs_errors_count > 0 %>
              <span class="label label-warning pull-right">Errors</span>
            <% end %>
          </h2>
          <p><%= pluralize(@delayed_jobs_active_count, 'active job') %>. <%= pluralize(@delayed_jobs_active_count, 'job') %> with <%= pluralize(@delayed_jobs_errors_count, 'error') %> in the last 24 hours.</p>
        </div>
      </div>
    </li>
    <li class="span4">
      <div class="thumbnail">
        <div class="caption">
          <h2>
            <i class="icon-list"></i> Queues
            <% if @queued_count == 0 %>
              <span class="label label-warning pull-right">No Queued Articles</span>
            <% end %>
          </h2>
          <p><%= pluralize(@queued_count, 'queued article') %>.<br/>&nbsp;</p>
        </div>
      </div>
    </li>
  </ul>
</div>