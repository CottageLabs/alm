<div class="content">
  <div class="page-header">
    <h1>Jobs</h1>
  </div>
  
  <table class="table">
    <thead>
      <tr>
        <th>Queue</th>
        <th class="visible-phone">Total</th>
        <th class="hidden-phone">Waiting</th>
        <th class="hidden-phone">Active</th>
        <th class="hidden-phone">Failed</th>
      </tr>
    </thead>
    <tbody>
      <% @sources.each do|source| %>
        <tr>
          <td><%= link_to h(source.display_name), admin_source_path(source) %></td>
          <td class="visible-phone"><%= source.delayed_jobs.count(:run_at) %></td>
          <td class="hidden-phone"><%= source.delayed_jobs.count(:run_at) - (source.delayed_jobs.count(:locked_at) + source.delayed_jobs.count(:failed_at)) %></td>
          <td class="hidden-phone"><%= source.delayed_jobs.count(:locked_at) %></td>
          <td class="hidden-phone"><%= source.delayed_jobs.count(:failed_at) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>